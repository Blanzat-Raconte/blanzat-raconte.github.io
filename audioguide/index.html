<html>
<head>
   <style>
  body {
    font-family: Arial, sans-serif;
/*     text-align: center; */
    padding: 40px;
    background: #f5f5f5;
  }

  .player {
    display: inline-block;
    background: white;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    text-align: center;
  }

  button {
    background: #007bff;
    color: white;
    border: none;
    border-radius: 6px;
    padding: 10px 16px;
    margin: 10px;
    cursor: pointer;
    font-size: 16px;
    transition: background 0.2s;
    width: 120px;
  }

  button:hover {
    background: #0056b3;
  }

  button:disabled {
    background: #ccc;
    cursor: not-allowed;
    opacity: 0.6;
  }

  #track-info {
    margin-top: 20px;
  }

  #track-info img {
    max-width: 250px;
    border-radius: 10px;
    margin-top: 10px;
    display: inline-block;
  }
</style>
</head>
<body>
   
   
<h2>Jardin des bonbons √† Blanzat</h2>
<div id="status"></div>
<h3>Comment faire ?</h3>
<p>
Il y a des poteaux en bois le long du chemin du jardin. Les poteaux sont reli√©s par une petite corde.
Certains poteaux ont un petit chapeau en plastique.
</p>
<p>
Touchez le haut de ces poteaux avec le t√©l√©phone pour √©couter un message sur les plantes qui sont proches.
</p>
<p>
Les sons durent moins de 1 minute (entre 15 secondes et 45 secondes).
</p>

<div>
<button id="scanButton">Scan</button>
</div>

<div class="player">
  <button id="playPauseBtn">‚ñ∂Ô∏è Play</button>
  <button id="restartBtn">üîÑ Rejouer</button>

  <div id="track-info">
    <h3 id="title"></h3>
    <img id="cover" src="" alt="" style="display:none;">
  </div>
</div>

<script>
  let audio = null;
  let isPlaying = false;

  function launch(audioFile, title, imageUrl, imageAlt) {
    // Si un son est d√©j√† en cours, on l'arr√™te
    if (audio) {
      audio.pause();
      audio.currentTime = 0;
    }

    // Cr√©e un nouvel objet Audio
    audio = new Audio(audioFile);
    audio.play();
    isPlaying = true;

    // Met √† jour les infos affich√©es
    document.getElementById('title').textContent = title;
    const cover = document.getElementById('cover');
    cover.src = imageUrl;
    cover.alt = imageAlt;
    cover.style.display = "inline-block";

    // Met √† jour le texte du bouton Play/Pause
    document.getElementById('playPauseBtn').textContent = "‚è∏Ô∏è Pause";
  }

  // Bouton Play / Pause
  document.getElementById('playPauseBtn').addEventListener('click', () => {
    if (!audio) return;
    if (isPlaying) {
      audio.pause();
      document.getElementById('playPauseBtn').textContent = "‚ñ∂Ô∏è Play";
    } else {
      audio.play();
      document.getElementById('playPauseBtn').textContent = "‚è∏Ô∏è Pause";
    }
    isPlaying = !isPlaying;
  });

  // Bouton Restart
  document.getElementById('restartBtn').addEventListener('click', () => {
    if (!audio) return;
    audio.currentTime = 0;
    audio.play();
    isPlaying = true;
    document.getElementById('playPauseBtn').textContent = "‚è∏Ô∏è Pause";
  });

</script>

<script>
var ChromeSamples = {
  log: function() {
    var line = Array.prototype.slice.call(arguments).map(function(argument) {
      return typeof argument === 'string' ? argument : JSON.stringify(argument);
    }).join(' ');

    document.querySelector('#log').textContent += line + '\n';
  },

  clearLog: function() {
    document.querySelector('#log').textContent = '';
  },

  setStatus: function(status) {
    document.querySelector('#status').textContent = status;
  }
};
</script>

<h3>Infos</h3>
<div id="output" class="output">
  <div id="status"></div>
  <pre id="log"></pre>
</div>

<script>
if (/Chrome\/(\d+\.\d+.\d+.\d+)/.test(navigator.userAgent)){
// Let's log a warning if the sample is not supposed to execute on this
// version of Chrome.
if (89 > parseInt(RegExp.$1)) {
  ChromeSamples.setStatus('Warning! Keep in mind this sample has been tested with Chrome ' + 89 + '.');
  }
}
// Add a global error event listener early on in the page load, to help ensure that browsers
// which don't support specific functionality still end up displaying a meaningful message.
window.addEventListener('error', function(error) {
  if (ChromeSamples && ChromeSamples.setStatus) {
    console.error(error);
    ChromeSamples.setStatus(error.message + ' (Your browser may not support this feature.)');
    error.preventDefault();
  }
});
</script>

<script>
log = ChromeSamples.log;
if (!("NDEFReader" in window)){
  ChromeSamples.setStatus("Cette page ne fonctionnera pas. Il faut utiliser le navigateur Chrome sur un t√©l√©phone Android pour que cela fonctionne.");
  launch('https://blanzat-raconte.github.io/audio/0.mp3', 'Ang√©lique', 'https://blanzat-raconte.github.io/assets/img/bonbons.png', 'grande fleur');
  }
  
scanButton.addEventListener("click", async () => {
  log("User clicked scan button");

  try {
    const ndef = new NDEFReader();
    await ndef.scan();
    log("> Scan started");

    ndef.addEventListener("readingerror", () => {
      log("Argh! Cannot read data from the NFC tag. Try another one?");
    });

    ndef.addEventListener("reading", ({ message, serialNumber }) => {
      log(`> Serial Number: ${serialNumber}`);
      log(`> Records: (${message.records.length})`);
    });
  } catch (error) {
    log("Argh! " + error);
  }
});

</script>

